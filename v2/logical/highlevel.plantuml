@startuml



title Trust Over IP Trust Registry Protocol v2 Early Exploration

package EGF {

}

' object Error 
class TrustRegistry {
    EGFURI
    RegistryMetadata: Metadata
}

class RegistryOfRegistries {
    FindDID()
    FindRegistry()
    ListRegistries()


}

class Query {
    EntityHasRight(entity, right)
    RecognizedRegistry(registryDID)
    GetResource(resourceDID)  
}

class Lookup {
    DIDMethods() 
    Roles()
    ResourceTypes()
    ' CredentialTypes()
    ' CredentialSchemas()
    ' PresentationRequests()
    ' Overlays()
    AssuranceLevels()
}

class Metadata {
    EGFURI: URI ' (duplicated above)
    TrustRegistryName: string
    RawAPIEndpoint: URL 
    AuthorityClaim: string 
    lastUpdated: datetime 
    

    Languages() 
}

' inheritance

EGF "1" -- "1" TrustRegistry

TrustRegistry <|-- Query
TrustRegistry <|-- Lookup 


package QueryDataObjects {
    object AuthorizationResponse 
    object RegistryRecognitionResponse {
        identifier: DID
        name: string
        peerType: enum
        description: string

    }
    object Resource {
        identifier: URI
        lastUpdated: datetime
        datatype: string
        payloadJSON: JSON
    }
    
}
package Lookups {
    package LookupLists {
        object DIDMethodList
        object RoleList
        object ResourceTypeList
        
        object AssuranceLevelsList
        ' object CredentialTypeList 
        ' object CredentialSchemaList
        ' object PresentationRequestList
        ' object OverlayList 
        
    }

    package LookupDataObjects {
    
        
        object DIDMethod {
            didmethod: string 
        }
        object Role {
            rolename: string 
        }
        ' object CredentialType {
        '     typeDID: string
        '     credentialSchema: CredentialSchema
        '     ?JustResources?: question

        ' }
        ' object CredentialSchema {
        '     identifier: string
        '     ?JustResources?: question
        ' }
        ' object PresentationRequest{
        '     identifier: string
        '     ?JustResources?: question

        ' }
        ' object Overlay {
        '     overlayIdentifier: DID
        '     overlayPayload: string 
        '     ?JustResources?: question
        ' }
        object ResourceType {
            resourceTypeIdentifier: DID
            resourceTypeString: string
            description: string 
        }
        object AssuranceLevel {
            AssuranceIdentifier: string
            AssuranceName: string
            'TODO multilingual
        }

    }
}






Query::GetResource --> Resource
Query::RecognizedRegistry --> RegistryRecognitionResponse


Lookup::DIDMethods --> DIDMethodList
Lookup::Roles --> RoleList

Lookup::ResourceTypes --> ResourceTypeList  
Lookup::AssuranceLevels --> AssuranceLevelsList

' METADATA related objects
TrustRegistry --> Metadata 



DIDMethodList o-- "1...n" DIDMethod 
RoleList o-- "0...n" Role
ResourceTypeList o-- "0...n" ResourceType


'' High-Level lots of specific classes
' Lookup::CredentialTypes --> CredentialTypeList
' Lookup::CredentialSchemas --> CredentialSchemaList
' Lookup::PresentationRequests --> PresentationRequestList
' Lookup::Overlays --> OverlayList
' Lookup::CredentialTypes --> CredentialTypeList
' Lookup::CredentialSchemas --> CredentialSchemaList
' Lookup::PresentationRequests --> PresentationRequestList
' Lookup::Overlays --> OverlayList
' CredentialTypeList o-- "0..n" CredentialType
' CredentialSchemaList o-- "0..n" CredentialSchema
' CredentialType o-- CredentialSchema
' PresentationRequestList o-- "0..n" PresentationRequest
' OverlayList o-- "0...n" Overlay

AssuranceLevelsList o-- "0...n" AssuranceLevel

'' Use Resources for assets
' Resource <|-- Overlay
' Resource <|-- CredentialSchema
' Resource <|-- PresentationRequest
' Resource <|-- CredentialType


@enduml